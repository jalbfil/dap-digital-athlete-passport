<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Infraestructura de Identidad Soberana para Credenciales Deportivas (TFG 2025)">
  <meta name="author" content="Juan Carlos Albert Fillol">
  
  <title>{% block title %}DAP — Digital Athlete Passport{% endblock %}</title>
  
  <link rel="stylesheet" href="/static/css/base.css">
  <link rel="icon" href="/favicon.ico">
  
  {% block head %}{% endblock %}
</head>
<body>

  <header class="header">
    <div class="header-inner">
      <div class="brand">
        DAP <small>v1.3</small>
      </div>
      
      <nav class="nav">
        <a href="/" id="lnk-home">Inicio</a>
        <a href="/issuer" id="lnk-issuer">Issuer</a>
        <a href="/holder" id="lnk-holder">Holder</a>
        <a href="/verifier" id="lnk-verifier">Verifier</a>
        <a href="/admin/ui?token=supersecreto123" id="lnk-admin" style="opacity: 0.5;">Admin</a>
      </nav>
    </div>
  </header>

  <main class="main">
    {% block content %}{% endblock %}
  </main>

  <footer class="footer">
    <p>
      <strong>Digital Athlete Passport (DAP)</strong> — Trabajo de Fin de Grado (TFG) 2025.<br>
      Arquitectura compatible con EBSI/ESSIF. Roles desacoplados. Privacidad por diseño.
    </p>
  </footer>

  <script>
    // Resaltado automático de la pestaña activa en la navegación
    document.addEventListener("DOMContentLoaded", () => {
        const path = location.pathname;
        const links = {
            "home": "/",
            "issuer": "/issuer",
            "holder": "/holder",
            "verifier": "/verifier",
            "admin": "/admin"
        };

        for (const [id, route] of Object.entries(links)) {
            const el = document.getElementById("lnk-" + id);
            if (!el) continue;
            
            // Lógica exacta para la Home vs lógica "starts with" para sub-rutas
            if (id === "home") {
                if (path === "/") el.classList.add("active");
            } else {
                if (path.startsWith(route)) el.classList.add("active");
            }
        }
    });
  </script>
  
  <script src="/static/role.js"></script>
  
  {% block scripts %}{% endblock %}
</body>
</html>
